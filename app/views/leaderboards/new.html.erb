<h1>Select Continent and Server</h1>

<%= form_with url: leaderboards_path, method: :get, local: true do %>
  <label for="continent">Select Continent:</label>
  <select name="continent" id="continent" onchange="updateServers()">
    <option value="europe" <%= 'selected' if @continent == 'europe' %>>Europe</option>
    <option value="americas" <%= 'selected' if @continent == 'americas' %>>Americas</option>
    <option value="asia" <%= 'selected' if @continent == 'asia' %>>Asia</option>
  </select>

  <label for="server">Select Server:</label>
  <select name="server" id="server">
    <option value="euw1" <%= 'selected' if @server == 'euw1' %>>EUW</option>
    <option value="eun1" <%= 'selected' if @server == 'eun1' %>>EUN</option>
    <option value="na1" <%= 'selected' if @server == 'na1' %>>NA</option>
    <option value="br1" <%= 'selected' if @server == 'br1' %>>BR1</option>
    <option value="la1" <%= 'selected' if @server == 'la1' %>>LA1</option>
    <option value="la2" <%= 'selected' if @server == 'la2' %>>LA2</option>
    <option value="kr" <%= 'selected' if @server == 'kr' %>>KR</option>
    <option value="jp1" <%= 'selected' if @server == 'jp1' %>>JP1</option>
    <option value="oc1" <%= 'selected' if @server == 'oc1' %>>OC1</option>
    <option value="tr1" <%= 'selected' if @server == 'tr1' %>>TR1</option>
    <option value="ru" <%= 'selected' if @server == 'ru' %>>RU</option>
  </select>

  <%= submit_tag 'Fetch Leaderboard' %>
<% end %>

<script>
  function updateServers() {
    var continent = document.getElementById('continent').value;
    var serverSelect = document.getElementById('server');
    serverSelect.innerHTML = '';

    var servers = {
      europe: [
        { value: 'euw1', text: 'EUW' },
        { value: 'eun1', text: 'EUN' },
        { value: 'tr1', text: 'TR1' },
        { value: 'ru', text: 'RU' }
      ],
      americas: [
        { value: 'na1', text: 'NA' },
        { value: 'br1', text: 'BR1' },
        { value: 'la1', text: 'LA1' },
        { value: 'la2', text: 'LA2' }
      ],
      asia: [
        { value: 'kr', text: 'KR' },
        { value: 'jp1', text: 'JP1' },
        { value: 'oc1', text: 'OC1' }
      ]
    };

    servers[continent].forEach(function(server) {
      var option = document.createElement('option');
      option.value = server.value;
      option.text = server.text;
      serverSelect.appendChild(option);
    });
  }

  // Call updateServers on page load to set the initial server options
  document.addEventListener('DOMContentLoaded', function() {
    updateServers();
  });
</script>